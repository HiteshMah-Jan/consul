    <ModalLayer />
    <header role="banner" data-test-navigation>
      <a data-test-main-nav-logo href={{href-to 'index'}}><svg width="28" height="28" xmlns="http://www.w3.org/2000/svg"><title>Consul</title><path d="M7.47305 26.3854C9.48866 27.4476 11.7331 28.0019 14.0114 28C17.5204 28.003 20.9019 26.6845 23.4828 24.307L20.1604 20.8313C18.8395 22.0244 17.201 22.8088 15.4433 23.0893C13.6857 23.3698 11.8844 23.1345 10.2578 22.4118C8.63116 21.6891 7.2491 20.5102 6.27911 19.0178C5.30911 17.5254 4.79282 15.7837 4.79282 14.0038C4.79282 12.2239 5.30911 10.4822 6.27911 8.98985C7.2491 7.49748 8.63116 6.31851 10.2578 5.59585C11.8844 4.87318 13.6857 4.63785 15.4433 4.91838C17.201 5.19891 18.8395 5.98325 20.1604 7.17634L23.4828 3.70062C21.8066 2.15739 19.7792 1.04655 17.5764 0.46452C15.3737 -0.117508 13.0621 -0.153138 10.8425 0.360723C8.62279 0.874585 6.56208 1.92241 4.83918 3.41325C3.11629 4.90408 1.78328 6.79288 0.955855 8.91569C0.128432 11.0385 -0.168399 13.3312 0.0911255 15.5947C0.35065 17.8583 1.15869 20.0243 2.4451 21.9047C3.73152 23.7852 5.45744 25.3232 7.47305 26.3854ZM24.6394 20.804C24.8281 20.9301 25.05 20.9974 25.2769 20.9974C25.5811 20.9967 25.8725 20.8756 26.0876 20.6606C26.3027 20.4455 26.4238 20.154 26.4244 19.8499C26.4244 19.6229 26.3571 19.4011 26.231 19.2124C26.105 19.0237 25.9257 18.8766 25.7161 18.7897C25.5064 18.7029 25.2757 18.6802 25.0531 18.7244C24.8305 18.7687 24.626 18.878 24.4655 19.0385C24.3051 19.199 24.1958 19.4034 24.1515 19.626C24.1072 19.8486 24.1299 20.0793 24.2168 20.289C24.3036 20.4987 24.4507 20.6779 24.6394 20.804ZM13.922 17.0336C13.3213 17.0361 12.7335 16.8603 12.2329 16.5284C11.7323 16.1965 11.3415 15.7234 11.11 15.1692C10.8785 14.615 10.8167 14.0045 10.9325 13.4151C11.0483 12.8257 11.3365 12.284 11.7605 11.8586C12.1845 11.4331 12.7253 11.1432 13.3142 11.0253C13.9032 10.9075 14.5139 10.9672 15.0689 11.1969C15.6239 11.4265 16.0983 11.8157 16.4319 12.3152C16.7655 12.8146 16.9433 13.4019 16.9428 14.0026C16.9415 14.8043 16.6231 15.5729 16.0571 16.1407C15.4912 16.7086 14.7237 17.0295 13.922 17.0336ZM25.9554 16.8938C26.1442 17.0199 26.366 17.0872 26.593 17.0872C26.8971 17.0866 27.1886 16.9654 27.4036 16.7504C27.6187 16.5353 27.7398 16.2439 27.7405 15.9397C27.7405 15.7128 27.6732 15.4909 27.5471 15.3022C27.421 15.1135 27.2418 14.9664 27.0321 14.8796C26.8224 14.7927 26.5917 14.77 26.3691 14.8143C26.1465 14.8586 25.942 14.9679 25.7816 15.1283C25.6211 15.2888 25.5118 15.4933 25.4675 15.7159C25.4232 15.9385 25.446 16.1692 25.5328 16.3789C25.6197 16.5885 25.7667 16.7678 25.9554 16.8938ZM23.1812 16.9442C22.9537 16.9442 22.7313 16.8765 22.5423 16.7499C22.3534 16.6232 22.2063 16.4432 22.1198 16.2328C22.0334 16.0224 22.0114 15.791 22.0567 15.5681C22.1021 15.3451 22.2126 15.1407 22.3744 14.9807C22.5361 14.8208 22.7418 14.7125 22.9652 14.6697C23.1887 14.6269 23.4198 14.6514 23.6292 14.7402C23.8387 14.829 24.017 14.9781 24.1415 15.1685C24.2661 15.3589 24.3312 15.582 24.3287 15.8094C24.3253 16.1116 24.2029 16.4002 23.9881 16.6126C23.7733 16.825 23.4833 16.9442 23.1812 16.9442ZM25.9554 13.0271C26.1442 13.1532 26.366 13.2205 26.593 13.2205C26.8971 13.2199 27.1886 13.0987 27.4036 12.8837C27.6187 12.6686 27.7398 12.3772 27.7405 12.073C27.7405 11.8461 27.6732 11.6242 27.5471 11.4355C27.421 11.2468 27.2418 11.0997 27.0321 11.0129C26.8224 10.926 26.5917 10.9033 26.3691 10.9476C26.1465 10.9919 25.942 11.1012 25.7816 11.2616C25.6211 11.4221 25.5118 11.6266 25.4675 11.8492C25.4232 12.0718 25.446 12.3025 25.5328 12.5122C25.6197 12.7218 25.7667 12.9011 25.9554 13.0271ZM23.1812 13.3509C22.9543 13.3509 22.7324 13.2836 22.5437 13.1575C22.355 13.0314 22.2079 12.8522 22.1211 12.6425C22.0342 12.4329 22.0115 12.2021 22.0558 11.9795C22.1001 11.7569 22.2094 11.5525 22.3698 11.392C22.5303 11.2315 22.7348 11.1222 22.9574 11.078C23.18 11.0337 23.4107 11.0564 23.6204 11.1433C23.83 11.2301 24.0093 11.3772 24.1353 11.5659C24.2614 11.7546 24.3287 11.9765 24.3287 12.2034C24.3287 12.5077 24.2078 12.7996 23.9926 13.0148C23.7774 13.23 23.4856 13.3509 23.1812 13.3509ZM24.7052 9.16926C24.8942 9.29504 25.1163 9.36191 25.3434 9.3614C25.6473 9.36072 25.9385 9.23953 26.1531 9.02441C26.3678 8.80928 26.4883 8.5178 26.4883 8.2139C26.4883 7.98684 26.421 7.76488 26.2948 7.57612C26.1686 7.38736 25.9892 7.24029 25.7794 7.15351C25.5695 7.06673 25.3387 7.04416 25.116 7.08864C24.8934 7.13313 24.6889 7.24267 24.5285 7.40341C24.3681 7.56414 24.2591 7.76885 24.2151 7.99161C24.1711 8.21437 24.1942 8.44517 24.2814 8.65481C24.3687 8.86444 24.5161 9.04348 24.7052 9.16926Z" fill="#fff"/></svg></a>
        <input type="checkbox" name="menu" id="main-nav-toggle" onchange={{action 'change'}} />
        <label for="main-nav-toggle">
          Toggle Menu
        </label>
        <div>
            <label for="main-nav-toggle">
                <span>Close</span>
            </label>
            <nav aria-label="Main">
{{#if dc}}
                <ul>
  {{#if (and (env 'CONSUL_NSPACES_ENABLED') (gt nspaces.length 0))}}
                    <li class="nspaces" data-test-nspace-menu>
    {{#if (and (eq nspaces.length 1) (not canManageNspaces)) }}
                        <span data-test-nspace-selected={{nspace.Name}}>{{nspace.Name}}</span>
    {{ else }}
                        <PopoverMenu @position="left" as |components api|>
                          <BlockSlot @name="trigger">
                            {{nspace.Name}}
                          </BlockSlot>
                        {{#if (is-href 'dc.nspaces')}}
                          <BlockSlot @name="header">
                            <p>
					                    Namespaces themselves are not namespaced, so switching will not change the current view.
                            </p>
                          </BlockSlot>
                        {{/if}}
                          <BlockSlot @name="menu">
                            {{#let components.MenuItem components.MenuSeparator as |MenuItem MenuSeparator|}}
                              <MenuSeparator>
                                <BlockSlot @name="label">
                                  Namespaces
                                  <DataSource
                                    @src="/*/*/namespaces"
                                    @onchange={{action (mut nspaces) value="data"}}
                                    @loading="lazy"
                                  />
                                </BlockSlot>
                              </MenuSeparator>
                            {{#each (reject-by 'DeletedAt' nspaces) as |item|}}
                              <MenuItem
                                class={{if (eq nspace.Name item.Name) 'is-active'}}
                                @href={{href-mut (hash nspace=(concat '~' item.Name))}}
                              >
                                <BlockSlot @name="label">
                                  {{item.Name}}
                                </BlockSlot>
                              </MenuItem>
                            {{/each}}
                    {{#if canManageNspaces }}
                              <MenuSeparator />
                              <MenuItem
                                data-test-main-nav-nspaces
                                @href={{href-to 'dc.nspaces' dc.Name}}
                              >
                                <BlockSlot @name="label">
                                  Manage Namespaces
                                </BlockSlot>
                              </MenuItem>
                    {{/if}}
                            {{/let}}
                          </BlockSlot>
                        </PopoverMenu>
    {{/if}}
                    </li>
  {{/if}}
                    <li data-test-datacenter-menu>
  {{#if (or (not dcs) (eq dcs.length 1)) }}
                        <span data-test-datacenter-selected={{dc.Name}}>{{dc.Name}}</span>
  {{ else }}
                        <PopoverMenu @position="left" as |components|>
                          <BlockSlot @name="trigger">
                            {{dc.Name}}
                          </BlockSlot>
                          <BlockSlot @name="menu">
                            {{#let components.MenuItem components.MenuSeparator as |MenuItem MenuSeparator|}}
                            <MenuSeparator>
                              <BlockSlot @name="label">
                                Datacenters
                                <DataSource
                                  @src="/*/*/datacenters"
                                  @onchange={{action (mut dcs) value="data"}}
                                  @loading="lazy"
                                />
                              </BlockSlot>
                            </MenuSeparator>
                            {{#each (sort-by 'Name' dcs) as |item|}}
                              <MenuItem
                                data-test-datacenter-picker
                                class={{concat (if (eq dc.Name item.Name) 'is-active') (if item.Local ' is-local') }}
                                @href={{href-mut (hash dc=item.Name)}}
                              >
                                <BlockSlot @name="label">
                                  <span>{{item.Name}}</span>
                                {{#if item.Local}}
                                  <span>Local</span>
                                {{/if}}
                                </BlockSlot>
                              </MenuItem>
                            {{/each}}
                            {{/let}}
                          </BlockSlot>
                        </PopoverMenu>

  {{/if}}
                    </li>
                    <li data-test-main-nav-services class={{if (is-href 'dc.services' dc.Name) 'is-active'}}>
                        <a href={{href-to 'dc.services' dc.Name}}>Services</a>
                    </li>
                    <li data-test-main-nav-nodes class={{if (is-href 'dc.nodes' dc.Name) 'is-active'}}>
                        <a href={{href-to 'dc.nodes' dc.Name}}>Nodes</a>
                    </li>
                    <li data-test-main-nav-kvs class={{if (is-href 'dc.kv' dc.Name) 'is-active'}}>
                        <a href={{href-to 'dc.kv' dc.Name}}>Key/Value</a>
                    </li>
                    <li data-test-main-nav-acls class={{if (or (is-href 'dc.acls' dc.Name) (is-href 'dc.aclsdisabled') (is-href 'dc.unauthorized')) 'is-active'}}>
                        <a href={{href-to 'dc.acls.tokens' dc.Name}}>ACL</a>
                    </li>
                    <li data-test-main-nav-intentions class={{if (is-href 'dc.intentions' dc.Name) 'is-active'}}>
                        <a href={{href-to 'dc.intentions' dc.Name}}>Intentions</a>
                    </li>
                </ul>
{{/if}}
            </nav>
            <nav>
                <ul>
                    <li data-test-main-nav-help>
                      <PopoverMenu @position="right" as |components|>
                        <BlockSlot @name="trigger">
                          Help
                        </BlockSlot>
                        <BlockSlot @name="menu">
                          {{#let components.MenuItem components.MenuSeparator as |MenuItem MenuSeparator|}}
                            <MenuItem
                              class="docs-link"
                              @href={{env 'CONSUL_DOCS_URL'}}
                            >
                              <BlockSlot @name="label">
                                Documentation
                              </BlockSlot>
                            </MenuItem>
                            <MenuItem
                              class="learn-link"
                              @href={{concat (env 'CONSUL_DOCS_LEARN_URL') '/consul'}}
                            >
                              <BlockSlot @name="label">
                                HashiCorp Learn
                              </BlockSlot>
                            </MenuItem>
                            <MenuSeparator />
                            <MenuItem
                              class="feedback-link"
                              @href={{env 'CONSUL_REPO_ISSUES_URL'}}
                            >
                              <BlockSlot @name="label">
                                Provide Feedback
                              </BlockSlot>
                            </MenuItem>
                          {{/let}}
                        </BlockSlot>
                      </PopoverMenu>
                    </li>
                    <li data-test-main-nav-settings class={{if (is-href 'settings') 'is-active'}}>
                        <a href={{href-to 'settings'}}>Settings</a>
                    </li>
{{#if (env 'CONSUL_ACLS_ENABLED')}}
                    <li data-test-main-nav-auth>
                      <AuthDialog
                        @dc={{dc.Name}}
                        @nspace={{nspace.Name}}
                        @onchange={{action "reauthorize"}} as |authDialog components|
                      >
                        {{#let components.AuthForm components.AuthProfile as |AuthForm AuthProfile|}}
                          <BlockSlot @name="unauthorized">
                            <label tabindex="0" for="login-toggle" onkeypress={{action 'keypressClick'}}>
                              <span>Log in</span>
                            </label>
                            <ModalDialog @name="login-toggle" @onclose={{action 'close'}} @onopen={{action 'open'}} as |api|>
                              <Ref @target={{this}} @name="modal" @value={{api}} />
                              <BlockSlot @name="header">
                                <h2>Log in to Consul</h2>
                              </BlockSlot>
                              <BlockSlot @name="body">
                                <AuthForm as |api|>
                                  <Ref @target={{this}} @name="authForm" @value={{api}} />
                                </AuthForm>
                              </BlockSlot>
                              <BlockSlot @name="actions" as |close|>
                                <button type="button" onclick={{action close}}>
                                  Continue without logging in
                                </button>
                              </BlockSlot>
                            </ModalDialog>
                          </BlockSlot>
                          <BlockSlot @name="authorized">
                            <ModalDialog @name="login-toggle" @onclose={{action 'close'}} @onopen={{action 'open'}} as |api|>
                              <Ref @target={{this}} @name="modal" @value={{api}} />
                              <BlockSlot @name="header">
                                <h2>Log in with a different token</h2>
                              </BlockSlot>
                              <BlockSlot @name="body">
                                <AuthForm as |api|>
                                  <Ref @target={{this}} @name="authForm" @value={{api}} />
                                </AuthForm>
                              </BlockSlot>
                              <BlockSlot @name="actions" as |close|>
                                <button type="button" onclick={{action close}}>
                                  Continue without logging in
                                </button>
                              </BlockSlot>
                            </ModalDialog>
                            <PopoverMenu @position="right" as |components api|>
                              <BlockSlot @name="trigger">
                                Logout
                              </BlockSlot>
                              <BlockSlot @name="menu">
                                {{#let components.MenuItem components.MenuSeparator as |MenuItem MenuSeparator|}}
        {{!TODO: It might be nice to use one of our recursive components here}}
        {{#if authDialog.token.AccessorID}}
                                    <li role="none">
                                      <AuthProfile />
                                    </li>
                                    <MenuSeparator />
        {{/if}}
                                    <MenuItem
                                      class="dangerous"
                                      @onclick={{action authDialog.logout}}
                                    >
                                      <BlockSlot @name="label">
                                        Logout
                                      </BlockSlot>
                                    </MenuItem>
                                  {{/let}}
                              </BlockSlot>
                            </PopoverMenu>
                          </BlockSlot>
                        {{/let}}
                      </AuthDialog>
                    </li>
{{/if}}
                </ul>
            </nav>
        </div>
    </header>
    <main>
{{yield}}
    </main>
    <footer role="contentinfo" data-test-footer>
        <a data-test-footer-copyright href="{{env 'CONSUL_COPYRIGHT_URL'}}/" rel="noopener noreferrer" target="_blank">&copy; {{env 'CONSUL_COPYRIGHT_YEAR'}} HashiCorp</a>
        <p data-test-footer-version>Consul {{env 'CONSUL_VERSION'}}</p>
        <a data-test-footer-docs href="{{env 'CONSUL_DOCS_URL'}}" rel="help noopener noreferrer" target="_blank">Documentation</a>
        {{{concat '<!-- ' (env 'CONSUL_GIT_SHA') '-->'}}}
    </footer>